{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"SolutionsGuidanceMacieStack":{"id":"SolutionsGuidanceMacieStack","path":"SolutionsGuidanceMacieStack","children":{"CreateMacieJobFunction":{"id":"CreateMacieJobFunction","path":"SolutionsGuidanceMacieStack/CreateMacieJobFunction","children":{"ServiceRole":{"id":"ServiceRole","path":"SolutionsGuidanceMacieStack/CreateMacieJobFunction/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"SolutionsGuidanceMacieStack/CreateMacieJobFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.196.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/CreateMacieJobFunction/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.196.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SolutionsGuidanceMacieStack/CreateMacieJobFunction/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/CreateMacieJobFunction/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["events:DescribeEventBus","iam:PassRole","macie2:CreateClassificationJob","macie2:TagResource","s3:GetBucketLocation","s3:GetObject","s3:ListBucket"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CreateMacieJobFunctionServiceRoleDefaultPolicy135D150A","roles":[{"Ref":"CreateMacieJobFunctionServiceRole8C319BDD"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.196.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.196.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]}},"Code":{"id":"Code","path":"SolutionsGuidanceMacieStack/CreateMacieJobFunction/Code","children":{"Stage":{"id":"Stage","path":"SolutionsGuidanceMacieStack/CreateMacieJobFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.196.0"}},"AssetBucket":{"id":"AssetBucket","path":"SolutionsGuidanceMacieStack/CreateMacieJobFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.196.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.196.0"}},"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/CreateMacieJobFunction/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"a3dc5a315ccf6633cb61af963aef7d8013102adc9c890d2bd1e15d99f741ad52.zip"},"description":"Lambda function to create Amazon Macie Classification Jobs","environment":{"variables":{"NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":256,"role":{"Fn::GetAtt":["CreateMacieJobFunctionServiceRole8C319BDD","Arn"]},"runtime":"nodejs18.x","timeout":300}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.196.0","metadata":[{"entry":"*","handler":"*","runtime":"*","timeout":"*","memorySize":"*","description":"*","environment":"*","bundling":{"minify":true,"sourceMap":true,"target":"*","keepNames":true,"externalModules":"*"},"code":"*"},{},{"entry":"*","handler":"*","runtime":"*","timeout":"*","memorySize":"*","description":"*","environment":"*","bundling":{"minify":true,"sourceMap":true,"target":"*","keepNames":true,"externalModules":"*"}}]}},"ProcessMacieJobStatusFunction":{"id":"ProcessMacieJobStatusFunction","path":"SolutionsGuidanceMacieStack/ProcessMacieJobStatusFunction","children":{"ServiceRole":{"id":"ServiceRole","path":"SolutionsGuidanceMacieStack/ProcessMacieJobStatusFunction/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"SolutionsGuidanceMacieStack/ProcessMacieJobStatusFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.196.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/ProcessMacieJobStatusFunction/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.196.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SolutionsGuidanceMacieStack/ProcessMacieJobStatusFunction/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/ProcessMacieJobStatusFunction/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["events:DescribeEventBus","events:PutEvents","macie2:DescribeClassificationJob"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ProcessMacieJobStatusFunctionServiceRoleDefaultPolicyFC179B5C","roles":[{"Ref":"ProcessMacieJobStatusFunctionServiceRoleA045382A"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.196.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.196.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]}},"Code":{"id":"Code","path":"SolutionsGuidanceMacieStack/ProcessMacieJobStatusFunction/Code","children":{"Stage":{"id":"Stage","path":"SolutionsGuidanceMacieStack/ProcessMacieJobStatusFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.196.0"}},"AssetBucket":{"id":"AssetBucket","path":"SolutionsGuidanceMacieStack/ProcessMacieJobStatusFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.196.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.196.0"}},"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/ProcessMacieJobStatusFunction/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"27b7ac446fa7995f39fef060eb2498722b62cdd52b5af1634101f66c1d5191f9.zip"},"description":"Lambda function to process Macie job status events and publish to EventBridge","environment":{"variables":{"NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ProcessMacieJobStatusFunctionServiceRoleA045382A","Arn"]},"runtime":"nodejs18.x","timeout":300}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.196.0","metadata":[{"entry":"*","handler":"*","runtime":"*","timeout":"*","memorySize":"*","description":"*","environment":"*","bundling":{"minify":true,"sourceMap":true,"target":"*","keepNames":true,"externalModules":"*"},"code":"*"},{},{"entry":"*","handler":"*","runtime":"*","timeout":"*","memorySize":"*","description":"*","environment":"*","bundling":{"minify":true,"sourceMap":true,"target":"*","keepNames":true,"externalModules":"*"}}]}},"GetMacieFindingsFunction":{"id":"GetMacieFindingsFunction","path":"SolutionsGuidanceMacieStack/GetMacieFindingsFunction","children":{"ServiceRole":{"id":"ServiceRole","path":"SolutionsGuidanceMacieStack/GetMacieFindingsFunction/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"SolutionsGuidanceMacieStack/GetMacieFindingsFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.196.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/GetMacieFindingsFunction/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.196.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SolutionsGuidanceMacieStack/GetMacieFindingsFunction/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/GetMacieFindingsFunction/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["macie2:GetFindings","macie2:ListFindings"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"GetMacieFindingsFunctionServiceRoleDefaultPolicyC04B84D2","roles":[{"Ref":"GetMacieFindingsFunctionServiceRole5443FBCE"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.196.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.196.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]}},"Code":{"id":"Code","path":"SolutionsGuidanceMacieStack/GetMacieFindingsFunction/Code","children":{"Stage":{"id":"Stage","path":"SolutionsGuidanceMacieStack/GetMacieFindingsFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.196.0"}},"AssetBucket":{"id":"AssetBucket","path":"SolutionsGuidanceMacieStack/GetMacieFindingsFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.196.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.196.0"}},"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/GetMacieFindingsFunction/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"efc2d0ea522c2f58a5b03c9e94edc35253fb1cbb4e7b96bac73899c28308fac2.zip"},"description":"Lambda function to retrieve Macie job findings via API Gateway or EventBridge events","environment":{"variables":{"NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":1024,"role":{"Fn::GetAtt":["GetMacieFindingsFunctionServiceRole5443FBCE","Arn"]},"runtime":"nodejs18.x","timeout":900}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.196.0","metadata":[{"entry":"*","handler":"*","runtime":"*","timeout":"*","memorySize":"*","description":"*","environment":"*","bundling":{"minify":true,"sourceMap":true,"target":"*","keepNames":true,"externalModules":"*"},"code":"*"},{},{"entry":"*","handler":"*","runtime":"*","timeout":"*","memorySize":"*","description":"*","environment":"*","bundling":{"minify":true,"sourceMap":true,"target":"*","keepNames":true,"externalModules":"*"}}]}},"MacieClassificationJobsLogGroup":{"id":"MacieClassificationJobsLogGroup","path":"SolutionsGuidanceMacieStack/MacieClassificationJobsLogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.196.0","metadata":[]}},"MacieJobStatusSubscriptionFilter":{"id":"MacieJobStatusSubscriptionFilter","path":"SolutionsGuidanceMacieStack/MacieJobStatusSubscriptionFilter","children":{"CanInvokeLambda":{"id":"CanInvokeLambda","path":"SolutionsGuidanceMacieStack/MacieJobStatusSubscriptionFilter/CanInvokeLambda","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ProcessMacieJobStatusFunctionA8DD4C94","Arn"]},"principal":"logs.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/macie/classificationjobs:*"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.196.0"}},"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/MacieJobStatusSubscriptionFilter/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::SubscriptionFilter","aws:cdk:cloudformation:props":{"destinationArn":{"Fn::GetAtt":["ProcessMacieJobStatusFunctionA8DD4C94","Arn"]},"filterName":"MacieJobStatusFilter","filterPattern":"?\"SCHEDULED_RUN_COMPLETED\" ?\"JOB_COMPLETED\" ?\"NO_BUCKETS_MATCHED_THE_CRITERIA\" ?\"JOB_CANCELLED\" ?\"ACCOUNT_\" ?\"BUCKET_\"","logGroupName":"/aws/macie/classificationjobs"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnSubscriptionFilter","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.SubscriptionFilter","version":"2.196.0","metadata":[{"logGroup":"*","destination":"*","filterPattern":{"logPatternString":"*"},"filterName":"*"}]}},"MacieApiGatewayLogGroup":{"id":"MacieApiGatewayLogGroup","path":"SolutionsGuidanceMacieStack/MacieApiGatewayLogGroup","children":{"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/MacieApiGatewayLogGroup/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/aws/apigateway/macie-api-access-logs","retentionInDays":30}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.196.0","metadata":[{"logGroupName":"*","retention":30,"removalPolicy":"destroy"}]}},"MacieApi":{"id":"MacieApi","path":"SolutionsGuidanceMacieStack/MacieApi","children":{"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/MacieApi/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"API Gateway for creating Amazon Macie Classification Jobs and retrieving findings","name":"Macie Jobs and Findings API"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.196.0"}},"Deployment":{"id":"Deployment","path":"SolutionsGuidanceMacieStack/MacieApi/Deployment","children":{"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/MacieApi/Deployment/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"API Gateway for creating Amazon Macie Classification Jobs and retrieving findings","restApiId":{"Ref":"MacieApi3C037E31"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.196.0","metadata":[{"description":"*","api":"*","retainDeployments":"*"},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]}]}},"DeploymentStage.v1":{"id":"DeploymentStage.v1","path":"SolutionsGuidanceMacieStack/MacieApi/DeploymentStage.v1","children":{"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/MacieApi/DeploymentStage.v1/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"accessLogSetting":{"destinationArn":{"Fn::GetAtt":["MacieApiGatewayLogGroupE6AFA768","Arn"]},"format":"{\"requestId\":\"$context.requestId\",\"ip\":\"$context.identity.sourceIp\",\"user\":\"$context.identity.user\",\"caller\":\"$context.identity.caller\",\"requestTime\":\"$context.requestTime\",\"httpMethod\":\"$context.httpMethod\",\"resourcePath\":\"$context.resourcePath\",\"status\":\"$context.status\",\"protocol\":\"$context.protocol\",\"responseLength\":\"$context.responseLength\"}"},"deploymentId":{"Ref":"MacieApiDeployment0C4B9E45901a34d2c5b39447e52a96627aa955d5"},"methodSettings":[{"httpMethod":"*","resourcePath":"/*","dataTraceEnabled":false,"metricsEnabled":true}],"restApiId":{"Ref":"MacieApi3C037E31"},"stageName":"v1"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.196.0","metadata":[{"deployment":"*","stageName":"*","metricsEnabled":true,"accessLogDestination":"*","accessLogFormat":"*"}]}},"Endpoint":{"id":"Endpoint","path":"SolutionsGuidanceMacieStack/MacieApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.196.0"}},"Default":{"id":"Default","path":"SolutionsGuidanceMacieStack/MacieApi/Default","children":{"OPTIONS":{"id":"OPTIONS","path":"SolutionsGuidanceMacieStack/MacieApi/Default/OPTIONS","children":{"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/MacieApi/Default/OPTIONS/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["MacieApi3C037E31","RootResourceId"]},"restApiId":{"Ref":"MacieApi3C037E31"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.196.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]}},"create-job":{"id":"create-job","path":"SolutionsGuidanceMacieStack/MacieApi/Default/create-job","children":{"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/MacieApi/Default/create-job/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["MacieApi3C037E31","RootResourceId"]},"pathPart":"create-job","restApiId":{"Ref":"MacieApi3C037E31"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.196.0"}},"OPTIONS":{"id":"OPTIONS","path":"SolutionsGuidanceMacieStack/MacieApi/Default/create-job/OPTIONS","children":{"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/MacieApi/Default/create-job/OPTIONS/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MacieApicreatejob5A211E10"},"restApiId":{"Ref":"MacieApi3C037E31"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.196.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]}},"POST":{"id":"POST","path":"SolutionsGuidanceMacieStack/MacieApi/Default/create-job/POST","children":{"ApiPermission.SolutionsGuidanceMacieStackMacieApi6C3760EF.POST..create-job":{"id":"ApiPermission.SolutionsGuidanceMacieStackMacieApi6C3760EF.POST..create-job","path":"SolutionsGuidanceMacieStack/MacieApi/Default/create-job/POST/ApiPermission.SolutionsGuidanceMacieStackMacieApi6C3760EF.POST..create-job","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateMacieJobFunction84B97BA1","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MacieApi3C037E31"},"/",{"Ref":"MacieApiDeploymentStagev1EB5CAF91"},"/POST/create-job"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.196.0"}},"ApiPermission.Test.SolutionsGuidanceMacieStackMacieApi6C3760EF.POST..create-job":{"id":"ApiPermission.Test.SolutionsGuidanceMacieStackMacieApi6C3760EF.POST..create-job","path":"SolutionsGuidanceMacieStack/MacieApi/Default/create-job/POST/ApiPermission.Test.SolutionsGuidanceMacieStackMacieApi6C3760EF.POST..create-job","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateMacieJobFunction84B97BA1","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MacieApi3C037E31"},"/test-invoke-stage/POST/create-job"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.196.0"}},"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/MacieApi/Default/create-job/POST/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"AWS_IAM","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CreateMacieJobFunction84B97BA1","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":"$input.json(\"$\")"},"integrationResponses":[{"statusCode":"200","responseTemplates":{"application/json":"$input.json(\"$\")"}},{"statusCode":"400","selectionPattern":".*\"statusCode\":400.*","responseTemplates":{"application/json":"$input.json(\"$\")"}},{"statusCode":"500","selectionPattern":".*\"statusCode\":500.*","responseTemplates":{"application/json":"$input.json(\"$\")"}}]},"methodResponses":[{"statusCode":"200","responseModels":{"application/json":"Empty"}},{"statusCode":"400","responseModels":{"application/json":"Error"}},{"statusCode":"500","responseModels":{"application/json":"Error"}}],"requestModels":{"application/json":{"Ref":"MacieJobRequestModel603CA968"}},"requestValidatorId":{"Ref":"MacieJobRequestValidator75A0FDE5"},"resourceId":{"Ref":"MacieApicreatejob5A211E10"},"restApiId":{"Ref":"MacieApi3C037E31"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.196.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","requestValidator":"*","requestModels":"*","methodResponses":[{"statusCode":"*","responseModels":"*"},{"statusCode":"*","responseModels":"*"},{"statusCode":"*","responseModels":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseModels":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseModels":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseModels":"*"}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.196.0","metadata":[{"parent":"*","pathPart":"*"}]}},"get-findings":{"id":"get-findings","path":"SolutionsGuidanceMacieStack/MacieApi/Default/get-findings","children":{"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/MacieApi/Default/get-findings/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["MacieApi3C037E31","RootResourceId"]},"pathPart":"get-findings","restApiId":{"Ref":"MacieApi3C037E31"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.196.0"}},"OPTIONS":{"id":"OPTIONS","path":"SolutionsGuidanceMacieStack/MacieApi/Default/get-findings/OPTIONS","children":{"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/MacieApi/Default/get-findings/OPTIONS/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MacieApigetfindings2996E729"},"restApiId":{"Ref":"MacieApi3C037E31"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.196.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]}},"GET":{"id":"GET","path":"SolutionsGuidanceMacieStack/MacieApi/Default/get-findings/GET","children":{"ApiPermission.SolutionsGuidanceMacieStackMacieApi6C3760EF.GET..get-findings":{"id":"ApiPermission.SolutionsGuidanceMacieStackMacieApi6C3760EF.GET..get-findings","path":"SolutionsGuidanceMacieStack/MacieApi/Default/get-findings/GET/ApiPermission.SolutionsGuidanceMacieStackMacieApi6C3760EF.GET..get-findings","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetMacieFindingsFunction2F139E53","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MacieApi3C037E31"},"/",{"Ref":"MacieApiDeploymentStagev1EB5CAF91"},"/GET/get-findings"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.196.0"}},"ApiPermission.Test.SolutionsGuidanceMacieStackMacieApi6C3760EF.GET..get-findings":{"id":"ApiPermission.Test.SolutionsGuidanceMacieStackMacieApi6C3760EF.GET..get-findings","path":"SolutionsGuidanceMacieStack/MacieApi/Default/get-findings/GET/ApiPermission.Test.SolutionsGuidanceMacieStackMacieApi6C3760EF.GET..get-findings","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetMacieFindingsFunction2F139E53","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MacieApi3C037E31"},"/test-invoke-stage/GET/get-findings"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.196.0"}},"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/MacieApi/Default/get-findings/GET/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"AWS_IAM","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetMacieFindingsFunction2F139E53","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","integrationResponses":[{"statusCode":"200","responseTemplates":{"application/json":"$input.json(\"$\")"},"responseParameters":{"method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,OPTIONS'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'"}},{"statusCode":"400","selectionPattern":".*\"statusCode\":400.*","responseTemplates":{"application/json":"$input.json(\"$\")"},"responseParameters":{"method.response.header.Access-Control-Allow-Origin":"'*'"}},{"statusCode":"500","selectionPattern":".*\"statusCode\":500.*","responseTemplates":{"application/json":"$input.json(\"$\")"},"responseParameters":{"method.response.header.Access-Control-Allow-Origin":"'*'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Headers":true},"responseModels":{"application/json":"Empty"}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true},"responseModels":{"application/json":"Error"}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true},"responseModels":{"application/json":"Error"}}],"requestParameters":{"method.request.querystring.jobId":true,"method.request.querystring.maxResults":false,"method.request.querystring.nextToken":false},"requestValidatorId":{"Ref":"GetFindingsRequestValidator7DE76D67"},"resourceId":{"Ref":"MacieApigetfindings2996E729"},"restApiId":{"Ref":"MacieApi3C037E31"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.196.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","requestValidator":"*","requestParameters":"*","methodResponses":[{"statusCode":"*","responseModels":"*","responseParameters":"*"},{"statusCode":"*","responseModels":"*","responseParameters":"*"},{"statusCode":"*","responseModels":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseModels":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseModels":"*","responseParameters":"*"}]},{"addMethodResponse":[{"statusCode":"*","responseModels":"*","responseParameters":"*"}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.196.0","metadata":[{"parent":"*","pathPart":"*"}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.196.0","metadata":["*"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.196.0","metadata":[{"restApiName":"*","description":"*","deployOptions":{"stageName":"*","metricsEnabled":true,"accessLogDestination":"*","accessLogFormat":"*"},"defaultCorsPreflightOptions":{"allowOrigins":"*","allowMethods":"*","allowHeaders":"*"}}]}},"MacieJobRequestModel":{"id":"MacieJobRequestModel","path":"SolutionsGuidanceMacieStack/MacieJobRequestModel","children":{"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/MacieJobRequestModel/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Model","aws:cdk:cloudformation:props":{"contentType":"application/json","description":"Model for Macie Classification Job creation requests","name":"MacieJobRequest","restApiId":{"Ref":"MacieApi3C037E31"},"schema":{"$schema":"http://json-schema.org/draft-04/schema#","title":"MacieJobRequest","type":"object","properties":{"name":{"type":"string","minLength":1,"maxLength":500},"jobType":{"type":"string","enum":["ONE_TIME","SCHEDULED"]},"s3JobDefinition":{"type":"object","properties":{"bucketDefinitions":{"type":"array","items":{"type":"object","properties":{"accountId":{"type":"string","pattern":"^[0-9]{12}$"},"buckets":{"type":"array","items":{"type":"string"}}},"required":["accountId","buckets"]}}},"required":["bucketDefinitions"]},"tags":{"type":"object","properties":{"JobStatusEventBusArn":{"type":"string","pattern":"^arn:aws:events:[a-z0-9-]+:[0-9]{12}:event-bus/.+$"}},"required":["JobStatusEventBusArn"]}},"required":["name","jobType","s3JobDefinition","tags"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnModel","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Model","version":"2.196.0","metadata":[{"restApi":"*","modelName":"*","description":"*","schema":{"schema":"http://json-schema.org/draft-04/schema#","title":"*","type":"object","properties":"*","required":"*"}}]}},"MacieJobRequestValidator":{"id":"MacieJobRequestValidator","path":"SolutionsGuidanceMacieStack/MacieJobRequestValidator","children":{"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/MacieJobRequestValidator/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RequestValidator","aws:cdk:cloudformation:props":{"name":"MacieJobRequestValidator","restApiId":{"Ref":"MacieApi3C037E31"},"validateRequestBody":true,"validateRequestParameters":true}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRequestValidator","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RequestValidator","version":"2.196.0","metadata":[{"restApi":"*","requestValidatorName":"*","validateRequestBody":true,"validateRequestParameters":true}]}},"GetFindingsRequestValidator":{"id":"GetFindingsRequestValidator","path":"SolutionsGuidanceMacieStack/GetFindingsRequestValidator","children":{"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/GetFindingsRequestValidator/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RequestValidator","aws:cdk:cloudformation:props":{"name":"GetFindingsRequestValidator","restApiId":{"Ref":"MacieApi3C037E31"},"validateRequestBody":false,"validateRequestParameters":true}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRequestValidator","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RequestValidator","version":"2.196.0","metadata":[{"restApi":"*","requestValidatorName":"*","validateRequestParameters":true,"validateRequestBody":false}]}},"ApiGatewayCloudWatchRole":{"id":"ApiGatewayCloudWatchRole","path":"SolutionsGuidanceMacieStack/ApiGatewayCloudWatchRole","children":{"ImportApiGatewayCloudWatchRole":{"id":"ImportApiGatewayCloudWatchRole","path":"SolutionsGuidanceMacieStack/ApiGatewayCloudWatchRole/ImportApiGatewayCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.196.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"SolutionsGuidanceMacieStack/ApiGatewayCloudWatchRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"description":"IAM role for API Gateway to write logs to CloudWatch","managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.196.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}],"description":"*"}]}},"ApiGatewayAccount":{"id":"ApiGatewayAccount","path":"SolutionsGuidanceMacieStack/ApiGatewayAccount","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["ApiGatewayCloudWatchRole86F22A4D","Arn"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.196.0"}},"MacieApiWafConstruct":{"id":"MacieApiWafConstruct","path":"SolutionsGuidanceMacieStack/MacieApiWafConstruct","children":{"MacieApiWafConstruct-WebACL":{"id":"MacieApiWafConstruct-WebACL","path":"SolutionsGuidanceMacieStack/MacieApiWafConstruct/MacieApiWafConstruct-WebACL","attributes":{"aws:cdk:cloudformation:type":"AWS::WAFv2::WebACL","aws:cdk:cloudformation:props":{"defaultAction":{"allow":{}},"rules":[{"name":"AWS-AWSManagedRulesBotControlRuleSet","priority":0,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"name":"AWSManagedRulesBotControlRuleSet","vendorName":"AWS"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"AWSManagedRulesBotControlRuleSet","sampledRequestsEnabled":true}},{"name":"AWS-AWSManagedRulesKnownBadInputsRuleSet","priority":1,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"name":"AWSManagedRulesKnownBadInputsRuleSet","vendorName":"AWS"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"AWSManagedRulesKnownBadInputsRuleSet","sampledRequestsEnabled":true}},{"name":"AWS-AWSManagedRulesCommonRuleSet","priority":2,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"name":"AWSManagedRulesCommonRuleSet","vendorName":"AWS"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"AWSManagedRulesCommonRuleSet","sampledRequestsEnabled":true}},{"name":"AWS-AWSManagedRulesAnonymousIpList","priority":3,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"name":"AWSManagedRulesAnonymousIpList","vendorName":"AWS"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"AWSManagedRulesAnonymousIpList","sampledRequestsEnabled":true}},{"name":"AWS-AWSManagedRulesAmazonIpReputationList","priority":4,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"name":"AWSManagedRulesAmazonIpReputationList","vendorName":"AWS"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"AWSManagedRulesAmazonIpReputationList","sampledRequestsEnabled":true}},{"name":"AWS-AWSManagedRulesAdminProtectionRuleSet","priority":5,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"name":"AWSManagedRulesAdminProtectionRuleSet","vendorName":"AWS"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"AWSManagedRulesAdminProtectionRuleSet","sampledRequestsEnabled":true}},{"name":"AWS-AWSManagedRulesSQLiRuleSet","priority":6,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"name":"AWSManagedRulesSQLiRuleSet","vendorName":"AWS"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"AWSManagedRulesSQLiRuleSet","sampledRequestsEnabled":true}}],"scope":"REGIONAL","visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"webACL","sampledRequestsEnabled":true}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_wafv2.CfnWebACL","version":"2.196.0"}}},"constructInfo":{"fqn":"@aws-solutions-constructs/aws-wafwebacl-apigateway.WafwebaclToApiGateway","version":"2.85.2"}},"MacieApiWafConstruct-WebACLAssociation":{"id":"MacieApiWafConstruct-WebACLAssociation","path":"SolutionsGuidanceMacieStack/MacieApiWafConstruct-WebACLAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::WAFv2::WebACLAssociation","aws:cdk:cloudformation:props":{"resourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},"::/restapis/",{"Ref":"MacieApi3C037E31"},"/stages/",{"Ref":"MacieApiDeploymentStagev1EB5CAF91"}]]},"webAclArn":{"Fn::GetAtt":["MacieApiWafConstructMacieApiWafConstructWebACL54B00260","Arn"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_wafv2.CfnWebACLAssociation","version":"2.196.0"}},"MacieApiUrl":{"id":"MacieApiUrl","path":"SolutionsGuidanceMacieStack/MacieApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.196.0"}},"MacieApiId":{"id":"MacieApiId","path":"SolutionsGuidanceMacieStack/MacieApiId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.196.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"SolutionsGuidanceMacieStack/CDKMetadata","children":{"Default":{"id":"Default","path":"SolutionsGuidanceMacieStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.196.0"}},"Condition":{"id":"Condition","path":"SolutionsGuidanceMacieStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.196.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"SolutionsGuidanceMacieStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.196.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SolutionsGuidanceMacieStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.196.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.196.0"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.196.0"}}}